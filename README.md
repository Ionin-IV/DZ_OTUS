# Домашнее задание по лекции "CAP теорема"

## Задание

Необходимо написать к каким системам по CAP теореме относятся перечисленные БД и почему:
MongoDB, MSSQL, Cassandra.

## Ответ

MongoDB я отношу к системе СА/A, т.к.:
- узлы без использования шардирования содержат одинаковые данные, а с шардированием разные - значит, в зависимости от настройки, может быть С или не С
- возможен доступ к кластеру, при недоступных узлах - значит А
- 

MSSQL (в варианте групп доступности AlwaysOn, как наиболее соответствующем распределённому кластеру) я отношу к системе CA, т.к.:
- Узлы содержат одинаковые данные. Ззначит С.
- Возможен доступ к "кластеру", при недоступных узлах. Значит А.
- Узлы не могут продолжать одновременно работать при разрыве сети, т.к. это будет split-brain. Значит не Р.

Примечание по MSSQL:
- Вариант классического отказоустойчивого кластера не рассматриваю, т.к. при этом нет распределения данных. По факту, есть одно хранилище с набором дисков, которые, в случае падения сервера с активным экземпляром СУБД, переключаются к другому серверу, где запускается свой экземпляр.
- Вариант зеркалирования тоже не рассматриваю, т.к. при этом идёт репликация данных только выбранных БД. Соответственно, при потере основного сервера, на зеркалах мы не получим его полную рабочую копию.

Cassandra, в зависимости от требуемого уровня согласованности, я отношу к системе AP или СР, т.к.:
- В запросе можно указывать уровень согласованности. В зависимости от этого можно получить, как согласованные, так и не согласованные данные. Значит может быть С или не С.
- Возможен доступ к кластеру, при недоступных узлах. С другой стороны, если в запросе требуется высокий уровень согласованности, то может не хватить необходимого количества доступных узлов. Значит может быть А или не А
- Узлы продолжают работать даже если есть недоступность по сети, а после восстановления сбоя сети, данные синхронизируются. Значит Р.
